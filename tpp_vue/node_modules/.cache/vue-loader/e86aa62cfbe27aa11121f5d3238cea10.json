{"remainingRequest":"d:\\小组\\jxq小组项目\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!d:\\小组\\jxq小组项目\\tpp_vue\\src\\components\\NavLogin.vue?vue&type=style&index=0&id=7624f9d4&scoped=true&lang=css","dependencies":[{"path":"d:\\小组\\jxq小组项目\\tpp_vue\\src\\components\\NavLogin.vue","mtime":1564747439619},{"path":"d:\\小组\\jxq小组项目\\tpp_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"d:\\小组\\jxq小组项目\\tpp_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"d:\\小组\\jxq小组项目\\tpp_vue\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"d:\\小组\\jxq小组项目\\tpp_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"d:\\小组\\jxq小组项目\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.nav_left{\r\n  position:fixed;z-index: 99;\r\n  top:50%;right:5%;margin-top:-140px;\r\n  font-size:24px;\r\n  text-align: center;\r\n  width:60px;\r\n  border-radius:5px;\r\n  background-color:aliceblue;\r\n}\r\n\r\n.btn_reg{background-color:aquamarine;margin-top:10px;}\r\n\r\n.nav_left div{\r\n    padding: 5px ;\r\n    cursor:pointer;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n.nav_left div:hover{\r\n    background-color: #fff;\r\n}\r\n\r\n.login{\r\n display:none;\r\n  width:375px;\r\n  background-color:#fff;\r\n  border:2px solid #eee;\r\n  z-index: 60;\r\n  padding:20px;\r\n  border-radius:3px;\r\n  position:fixed; \r\n  top:50%;left:50%;margin-left:-187.5px;margin-top:-140px;\r\n}\r\n.login.on{\r\n    display:block !important;\r\n}\r\n.btn_close{\r\n    margin-top:10px;\r\n}\r\n.d-none{\r\n    display:none;\r\n}\r\n",{"version":3,"sources":["NavLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NavLogin.vue","sourceRoot":"src\\components","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"nav_left\">\r\n            <div @click=\"login\" :class=\"{'d-none':isLogin}\">点击登录</div>\r\n            <div  :class=\"{'d-none':!isLogin}\">{{nav_left_login}}</div>\r\n            <div>退出登录</div>\r\n            <div @click=\"go_cart\">购物车</div> \r\n            <div @click=\"go_lady\">lady商城</div> \r\n            <div @click=\"go_index\">首页</div> \r\n        </div>\r\n        <div class=\"login\" :class=\"{on:isOn}\">\r\n            <mt-field label=\"用户名\" v-model=\"uname\" :attr=\"{maxlength:10}\" :placeholder=\"unameholder\">\r\n            </mt-field>\r\n            <mt-field label=\"密码\" v-model=\"upwd\" :attr=\"{maxlength:10}\" type=\"password\" :placeholder=\"upwdholder\">\r\n            </mt-field>\r\n            <mt-button type=\"primary\" size=\"large\" @click=\"check\">登录</mt-button>\r\n            <mt-button type=\"primary\" size=\"large\" class=\"btn_reg\" >注册</mt-button>\r\n            <mt-button  size=\"large\" class=\"btn_close\" @click=\"close\">退出</mt-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return {\r\n            isOn:false,\r\n            //双向绑定，获取input框里的uname,upwd\r\n            uname:\"\",\r\n            upwd:\"\",\r\n            unameholder:\"输入用户名\",\r\n            upwdholder:\"输入密码\",\r\n            //占位nav_left_login;\r\n            nav_left_login:\"欢迎\",\r\n            isLogin:false,\r\n        }\r\n    },\r\n    created(){\r\n        //创建成功时向服务器发起请求，查看是否存在req.session,返回uname的值\r\n        this.loadIsLogin();\r\n    },\r\n    methods:{\r\n        //点击购物车时对isLogin进行判断，为false，则提示登录，true的话进入购物车\r\n        go_cart(){\r\n            if(this.isLogin==false){\r\n                this.$toast({\r\n                    message:\"请先登录\",\r\n                    duration:1000\r\n                });\r\n                //弹出登录框\r\n                this.isOn=true;\r\n            }else{\r\n                //isLogin为true，直接跳到/shoppinCar\r\n                 this.$router.push(\"/shoppingCar\")\r\n            }\r\n        },\r\n        login(){this.isOn=true;},\r\n        close(){this.isOn=false;},\r\n        //跳转到lady商城\r\n        go_lady(){ this.$router.push(\"/lady\");},\r\n        go_index(){ this.$router.push(\"/\");},\r\n        check(){\r\n           var unameReg=/^[a-z0-9]{2,12}$/i;\r\n           if(!this.reg(unameReg,this.uname,\"用户名错误\")){\r\n               return;\r\n           };\r\n           var upwdReg=/^[a-z0-9]{2,12}$/i;\r\n           if(!this.reg(unameReg,this.upwd,\"密码错误\")){\r\n               return;\r\n           };\r\n           var uname=this.uname;\r\n           var upwd=this.upwd;\r\n            //正确时发起ajax请求\r\n            var url=\"user/v1/login\";\r\n            var obj={uname:uname,upwd:upwd};\r\n            this.axios.get(url,{params:obj}).then(\r\n                res=>{\r\n                    // console.log(res);\r\n                    //传过来的东西在res.data里\r\n                    if(res.data.code==1){\r\n                        this.$toast(`登录成功,欢迎回来,${uname}`);\r\n                        this.isOn=false;\r\n                        this.isLogin=true;\r\n                        this.nav_left_login=uname;\r\n                    }else{\r\n                        this.$toast(\"用户名或密码错误\")\r\n                    }\r\n                    console.log(res.data.code)\r\n                }\r\n            )\r\n        },\r\n        reg(reg,elem,msg){\r\n            var j=reg.test(elem);\r\n            if(j){\r\n                return true;\r\n            }else{\r\n                this.$toast({\r\n                    message:msg,\r\n                    duration:1000\r\n                })\r\n                return false;\r\n            }\r\n        },\r\n        loadIsLogin(){\r\n            var url=\"user/v1/isLogin\";\r\n            this.axios.get(url).then(\r\n                res=>{\r\n                    // console.log(res.data);\r\n                    if(res.data.code==1){\r\n                        this.isLogin=true;\r\n                        this.nav_left_login=res.data.data[0].uname;\r\n                        // console.log(res.data.data[0].uname);\r\n                        // this.nav_left_login=res.data.data.\r\n                    }\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.nav_left{\r\n  position:fixed;z-index: 99;\r\n  top:50%;right:5%;margin-top:-140px;\r\n  font-size:24px;\r\n  text-align: center;\r\n  width:60px;\r\n  border-radius:5px;\r\n  background-color:aliceblue;\r\n}\r\n\r\n.btn_reg{background-color:aquamarine;margin-top:10px;}\r\n\r\n.nav_left div{\r\n    padding: 5px ;\r\n    cursor:pointer;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n.nav_left div:hover{\r\n    background-color: #fff;\r\n}\r\n\r\n.login{\r\n display:none;\r\n  width:375px;\r\n  background-color:#fff;\r\n  border:2px solid #eee;\r\n  z-index: 60;\r\n  padding:20px;\r\n  border-radius:3px;\r\n  position:fixed; \r\n  top:50%;left:50%;margin-left:-187.5px;margin-top:-140px;\r\n}\r\n.login.on{\r\n    display:block !important;\r\n}\r\n.btn_close{\r\n    margin-top:10px;\r\n}\r\n.d-none{\r\n    display:none;\r\n}\r\n</style>"]}]}