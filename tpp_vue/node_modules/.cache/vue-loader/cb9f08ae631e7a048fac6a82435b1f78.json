{"remainingRequest":"c:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\src\\views\\ShoppingCar.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"c:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\src\\views\\ShoppingCar.vue","mtime":1564823742882},{"path":"c:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"c:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import url(\"../assets/css/shopping_car.css\");\n",{"version":3,"sources":["ShoppingCar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2RA","file":"ShoppingCar.vue","sourceRoot":"src\\views","sourcesContent":["<template>\r\n    <section id=\"shoppingCar\">\r\n        <nav-login></nav-login>\r\n        <div id=\"car_header\">\r\n            <div class=\"header_block\">\r\n                <img src=\"../../public/img/shoppingCar/logo.png\" alt=\"\">\r\n                <span>购物车</span>\r\n            </div>\r\n            <div class=\"header_search\">\r\n                <select name=\"header_search_select\" id=\"\">\r\n                    <option value=\"\">女装</option>\r\n                    <option value=\"\">男装</option>\r\n                    <option value=\"\">童装</option>\r\n                    <option value=\"\">国际设计师限量款</option>\r\n                </select>\r\n                <input type=\"text\" placeholder=\"波司登夏季防晒系列\">\r\n                <button>搜 索</button>\r\n            </div>\r\n        </div>\r\n        <div id=\"car_main\">\r\n            <ul class=\"car_main_ul\">\r\n                <li class=\"car_ul_li select\">全部商品<span>3</span></li>\r\n                <li class=\"car_ul_li\">降价商品<span>0</span></li>\r\n                <li class=\"car_ul_li\">库存紧张<span>0</span></li>\r\n                <div class=\"car_main_ul_underline\"></div>\r\n            </ul>\r\n            <div class=\"car_main_line\"></div>\r\n            <table class=car_main_table>\r\n                <thead>\r\n                    <tr>\r\n                        <td colspan=2><input type=\"checkbox\" name=\"car_checkbox\" @change=\"selectAll\" v-model=\"isSelectAll\"><span>全选</span></td>\r\n                        <td>商品信息</td>\r\n                        <td></td>\r\n                        <td>单价</td>\r\n                        <td>数量</td>\r\n                        <td>金额</td>\r\n                        <td>操作</td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(elem,i) of list\" :key=\"i\">\r\n                        <td><input type=\"checkbox\"  name=\"car_checkbox\" @change=\"checkone\"   v-model=\"elem.cb\" /></td>\r\n                        <td><img :src=\"`http://127.0.0.1:5050/`+elem.pic_hover\" alt=\"\"></td>\r\n                        <td>\r\n                            <span>{{elem.lname}}</span> </td>\r\n                        <td>\r\n                            <h3>颜色：【{{elem.color}}】</h3>\r\n                            <h4>尺码：{{elem.spec}}</h4>\r\n                        </td>\r\n                        <td>\r\n                            <span>¥{{elem.price*1.2}}</span>\r\n                            <span>¥{{elem.price}}</span>\r\n                        </td>\r\n                        <td>\r\n                            <div>\r\n                                <!-- 通过active来控制button的disable -->\r\n                                <!-- 在div button上加了一层div -->\r\n                                <button  :class=\"{btnDisabled:elem.count<=1}\" :data-iname=\"i\" @click=\"subCount\" >-</button>\r\n                                <input type=\"text\" v-model=\"elem.count\" >\r\n                                <button :data-iname=\"i\" @click=\"addCount\">+</button>\r\n                            </div>\r\n                        </td>\r\n                        <td>{{elem.price*elem.count}}</td>\r\n                        <td>\r\n                            <a href=\"javascript:;\">移入收藏夹</a>\r\n                            <a href=\"javascript:;\" :data-cid=\"elem.cid\" @click=\"delItem\">删除</a>\r\n                        </td>\r\n                    </tr> \r\n                    <!-- <tr>\r\n                        <td><input type=\"checkbox\"  name=\"car_checkbox\"/></td>\r\n                        <td><img src=\"../../public/img/shoppingCar/anli.jpg\" alt=\"\"></td>\r\n                        <td>\r\n                            <span>正品老夫子软膏老夫子皮肤抑菌膏买2送1 包邮 买3送2 不动号</span> </td>\r\n                        <td>\r\n                            <h3>颜色：【灰色+黑色】</h3>\r\n                            <h4>尺码：31[2尺4]</h4>\r\n                        </td>\r\n                        <td>\r\n                            <span>¥16.00</span>\r\n                            <span>¥14.30</span>\r\n                        </td>\r\n                        <td>\r\n                            <div>\r\n                                 通过active来控制button的disable \r\n                                 在div button上加了一层div \r\n                                <button disabled class=\"btnDisabled\">-</button>\r\n                                <input type=\"text\" value=\"1\">\r\n                                <button>+</button>\r\n                            </div>\r\n                        </td>\r\n                        <td>￥14.30</td>\r\n                        <td>\r\n                            <a href=\"javascript:;\">移入收藏夹</a>\r\n                            <a href=\"javascript:;\">删除</a>\r\n                        </td>\r\n                    </tr> -->\r\n                  \r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div id=car_settle class=\"fixedBottom\">\r\n            <div class=\"settle_left \">\r\n                <div>\r\n                    <input type=\"checkbox\" name=\"car_checkbox\" @change=\"selectAll\" v-model=\"isSelectAll\">\r\n                    <span>全选</span>\r\n                </div>\r\n                <a href=\"javascript:;\" @click=\"delAll\">删除</a>\r\n                <a href=\"javascript:;\">移入收藏夹</a>\r\n                <a href=\"javascript:;\">分享</a>\r\n            </div>\r\n            <div class=\"settle_right settleBottom\">\r\n                <a class=\"right_1\">\r\n                    <span>已选商品</span>\r\n                    <span class=\"right_1_num\">{{total.num}}</span>\r\n                    <span>件</span>\r\n                    <span class=\"right_1_icon\"></span>\r\n                </a>\r\n                <div class=\"right_2\">合计（不含运费）：</div>\r\n                <div class=\"right_3\">\r\n                    <span>¥</span>\r\n                    <span class=\"right_3_total\">{{total.total}}</span>\r\n                </div>\r\n                <a class=\"right_btn\" href=\"javascript:;\" @click=\"pay\">\r\n                    结 算\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>\r\n<script>\r\n    export default {\r\n      data(){\r\n          return {\r\n              a:\"\",\r\n              list:[],  //cb checkedbox  服务器传过来的东西放在这里\r\n              isSelectAll:false, //用来控制两个多选框的 一样变化\r\n\r\n              total_total:0, //这两个属性，展示没有使用 gettotal(){}\r\n              total_num:0,\r\n          }\r\n      },\r\n      props:{\r\n          // lid:{default:\"\"}\r\n      },\r\n      created(){\r\n        this.loadMore();\r\n      },\r\n      watch:{\r\n        //因为无法对list进行监听，也无法使用函数调用，所以采用computed的方法；\r\n        // list:function(){\r\n        //   this.gettotal();\r\n        // }\r\n      },\r\n      computed:{\r\n        //计算属性，返回一个 total={num:product_num,total:product_total}\r\n        total(){\r\n          var product_num=0;\r\n          var product_total=0;\r\n          for(var elem of this.list){\r\n            if(elem.cb==true){\r\n              product_num++;\r\n              product_total=product_total+elem.price*elem.count;\r\n            }\r\n          };\r\n          this.product_num=product_num;\r\n          this.product_total=product_total;\r\n          return {num:product_num,total:product_total}\r\n        }\r\n      },\r\n      methods:{\r\n        delAll(){\r\n          console.log(1);\r\n          //通过cd获取选中的cid向服务器端请求删除；\r\n        },\r\n        pay(){\r\n          this.$messagebox.alert(\"该功能未开发\").then(\r\n            result=>{\r\n              return;\r\n            }\r\n          )\r\n        },\r\n        //函数动态改变   可以使用，但是不用\r\n              // total_total:0,\r\n              // total_num:0,\r\n        // gettotal(){\r\n        //   var product_num=0;\r\n        //   var product_total=0;\r\n        //   for(var elem of this.list){\r\n        //     if(elem.cb==true){\r\n        //       product_num++;\r\n        //       product_total=product_total+elem.price*elem.count;\r\n        //     }\r\n        //   };\r\n        //   this.total_num=product_num;\r\n        //   this.total_total=product_total;\r\n        // },\r\n        // 单选按钮\r\n        checkone(){\r\n          // this.gettotal();\r\n          // console.log(this.list);\r\n          // console.log(this.product_num);\r\n          // console.log(this.product_total);\r\n          for(var elem of this.list){\r\n            if(elem.cb==false){this.isSelectAll=false;break};\r\n            // console.log(-1);\r\n          };\r\n          var num=0;\r\n          for(var elem of this.list){\r\n            if(elem.cb==true){num++;}\r\n          };\r\n          if(num==this.list.length){this.isSelectAll=true;};\r\n        },\r\n        // 增减函数1\r\n        subCount(e){\r\n          //使用  :class=\"{btnDisabled:elem.count<=1}\"  来控制样式的显示与否\r\n          var i=e.target.dataset.iname;\r\n          this.list[i].count=this.list[i].count-1;\r\n          if(this.list[i].count==0){this.list[i].count=1}; \r\n          // this.gettotal();\r\n        },\r\n        // 增减函数2\r\n        addCount(e){\r\n          // console.log(e.target.dataset.iname);\r\n          var i=e.target.dataset.iname;\r\n          this.list[i].count=this.list[i].count+1; \r\n          // console.log(this.list);\r\n          // this.gettotal();\r\n        },\r\n        // 全选按钮\r\n        selectAll(e){\r\n          //获取自己的checked值赋给其他人；\r\n          var cb=e.target.checked;\r\n          for(var elem of this.list){\r\n            elem.cb=cb;\r\n          }\r\n          // this.gettotal();\r\n        },\r\n        //删除商品\r\n        delItem(e){\r\n          console.log(1);\r\n          var url=\"cart/v1/delproduct\";\r\n          var cid=e.target.dataset.cid;\r\n          var obj={cid:cid};\r\n          this.$messagebox.confirm('是否删除')\r\n          //确认删除\r\n          .then(action=>{\r\n            this.axios.get(url,{params:obj}).then(\r\n            res=>{\r\n              //重新发起请求\r\n              this.$toast({\r\n                message:\"删除成功\",\r\n                duration:1000,\r\n              });\r\n              this.loadMore();\r\n            }\r\n          )\r\n          })\r\n          //否 无事发生\r\n          .catch(err=>{return});\r\n        },\r\n        //页面ajax请求函数\r\n        loadMore(){\r\n          var url=\"cart/v1/getproduct\"\r\n          this.axios.get(url).then(\r\n            res=>{\r\n              if(res.data.code==-1){\r\n                return;\r\n              }else{\r\n                var list=res.data.data;\r\n                //为每个elem加一个控制checkbox的属性\r\n                for(var elem of list){\r\n                  elem.cb=false;\r\n                }\r\n                this.list=list;\r\n                console.log(this.list);\r\n              }\r\n            }\r\n          )\r\n        }\r\n      }\r\n    }\r\n</script>\r\n<style>\r\n    @import url(\"../assets/css/shopping_car.css\");\r\n</style>"]}]}