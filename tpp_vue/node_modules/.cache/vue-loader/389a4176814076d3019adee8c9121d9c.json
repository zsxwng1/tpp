{"remainingRequest":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\views\\cinema\\Cinema.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\views\\cinema\\Cinema.vue","mtime":1566635931569},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import url('../../assets/css/findCinemaItem.css');\n@import url('../../assets/css/cinema.css')\n",{"version":3,"sources":["Cinema.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmPA;AACA","file":"Cinema.vue","sourceRoot":"src\\views\\cinema","sourcesContent":["<template>\r\n  <div id=\"cinema_show\">\r\n    <!--1 头部 ： 影院详情 -->\r\n    <div class=\"cinema_top\">\r\n      <div class=\"title\">{{cinema.cname}}</div>\r\n      <div class=\"address\">{{cinema.caddress}}}</div>\r\n      <div class=\"icons cf\">\r\n        <div class=\"icon\" v-for=\"(elem,i) of tag\" :key=\"i\">{{elem}}</div>\r\n        <!-- <div class=\"icon\">观影小食</div>\r\n        <div class=\"icon\">可停车</div> -->\r\n      </div>\r\n      <div class=\"prefe\">\r\n        <span>联合优惠专区</span> <br>\r\n        <span>银行、运营商特惠</span>\r\n      </div>\r\n      <div class=\"icon_abs\">\r\n        <img class=\"map\" src=\"http://127.0.0.1:5050/icon/dingwei.svg\" alt=\"\">\r\n        <img class=\"collect\" src=\"http://127.0.0.1:5050/icon/collect.svg\" alt=\"\">\r\n      </div>\r\n\r\n    </div>\r\n    <!--2 头部 ： 电影图片 -->\r\n    <div class=\"cinema_middle_img\" @touchstart=\"ontouchstart\" @touchmove=\"ontouchmove\" @touchend=\"ontouchend\">\r\n      <div class=\"img_blur\">\r\n        <img :src=\"imgUrls\" alt=\"\">\r\n      </div>\r\n      <div class=\"ul_cover\"></div>\r\n      <ul class=\"img_ul cf\" :style=\"{marginLeft:marginLeft+'px',width:ulWidth}\">\r\n        <li class=\"img_li\" v-for=\"(item,index) of movie\" :key=\"index\"> \r\n          <div class=\"img_block\" :class=\"{activeImg:index==i,noActive:index!=i}\">\r\n            <img   :src=\"`http://127.0.0.1:5050/${item.pic}`\" alt=\"\">\r\n            <div class=\"cover\" :data-index=\"index\" :class=\"{active:index==i}\" @click=\"changeI\" ></div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!--  -->\r\n    <div class=\"cinema_middle_title\" v-for=\"(item,index) of movie\" :key=\"index\" :class=\"{'d-none':index!=i}\">\r\n      <span class=\"title\">{{item.mname}}</span>\r\n      <span class=\"show\" :class=\"{'d-none':item.is_show==0}\">\r\n        <span class=\"ping\">淘票票评分</span>\r\n        <span class=\"score\">{{item.score}}</span>\r\n      </span>\r\n      <span class=\"show\"  :class=\"{'d-none':item.is_show==1}\">\r\n        <span class=\"people\">{{item.wish}}</span>\r\n        <span class=\"want\">人想看</span>\r\n      </span>\r\n      <br>\r\n      <span class=\"infor\">{{item.infor}}</span>\r\n    </div>\r\n    <!--3 头部 ： 电影播放时间 -->\r\n    <div class=\"cinema_bottom\" >\r\n      <van-tabs v-model=\"active\" line-width='5.3vw' color=\"#ff2e62\" line-height=\"2px\">\r\n        <van-tab title=\"今天08-24\">\r\n          内容 1\r\n        </van-tab>\r\n        <van-tab title=\"明天08-25\">\r\n          内容 2       \r\n        </van-tab>\r\n      </van-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      active: 2,\r\n      i:0,        //那张图片变大\r\n      marginLeft:window.innerWidth*0.39,  // 22vw一个位移 ,保存了ul的margin-left值\r\n      xStart:\"\",  //保存了初始手指位置\r\n      mlStart:\"\", //保存ul初始位置\r\n      movie:[],\r\n      time:[],\r\n      ulWidth:'400vw',\r\n      wiw:window.innerWidth,\r\n      cinema:[],\r\n      tag:[],\r\n    }\r\n  },\r\n  watch:{\r\n    marginLeft(){\r\n            //2 对marginLeft进行控制\r\n      var mlEnd=this.marginLeft;    //3 获取移动结束的margin-left值\r\n      //4 下面动态改变i的值      \r\n      var ml=this.marginLeft;\r\n      //\r\n      ml=window.innerWidth*0.50-ml; //用来计算向左移动多少margin-left\r\n      var i=parseInt(ml/(window.innerWidth*0.22)) ;\r\n      // console.log(ml);\r\n      if(i>this.movie.length-1){\r\n        i=this.movie.length-1\r\n      }\r\n      if(i<0){ i=0; }\r\n      this.i=i;\r\n      // console.log(i);\r\n      //5 ml当前的margin-left;中心的margin-left;\r\n      var mlCenter=-window.innerWidth*0.22*(this.i)+window.innerWidth*0.39;  //i图片中心的margin-left;\r\n      // 6 获取最大的abs差值\r\n      var wiw=this.wiw;\r\n      var absMax=wiw*0.11;\r\n      var absWid=Math.abs(mlEnd-mlCenter)\r\n      //7 比例\r\n      var scale=1-absWid/absMax;\r\n      // console.log(scale);\r\n      var imgBlock=document.getElementsByClassName(\"activeImg\")[0]\r\n      var imgBlockNo=document.getElementsByClassName(\"noActive\");\r\n      //使其他归位\r\n      for(var item of imgBlockNo){\r\n        item.style.width='';\r\n        item.style.height='';\r\n        item.style.left='10%';\r\n      }\r\n      imgBlock.style.width=(17.6+3.3*scale)*wiw*0.01+'px';\r\n      imgBlock.style.height=(24.3+4.5*scale)*wiw*0.01+'px';\r\n      imgBlock.style.left=(2.5+7.5*(1-scale))+'%';\r\n    }\r\n  },\r\n  computed:{\r\n    //使用计算属性，动态返回图片的路径\r\n    imgUrls(){\r\n      if(this.movie.length==0){ \r\n        return null;   //页面刷新时返回null\r\n      }else{\r\n        return  `http://127.0.0.1:5050/${this.movie[this.i].pic}`\r\n      }\r\n    },\r\n    //ul的宽度\r\n    cid(){ return this.$store.state.cid;  },  //获取cid\r\n    mid(){ return this.$store.state.mid;  }  , //获取mid\r\n    // mname(){ return this.$store.state.mname; }   //获取mid\r\n  },\r\n  created(){\r\n    //调用axios函数\r\n    this.loadCinema();\r\n    this.loadMore();\r\n  },\r\n  mounted(){\r\n    this.loadCinema();\r\n  },\r\n  methods:{ \r\n    strSplit(str){\r\n      var arr=str.split(\"，\");\r\n      // console.log(arr)\r\n      return arr;\r\n    },\r\n    //点击图片时移动,改变i值和margin-left值\r\n    changeI(e){\r\n      var i=e.target.dataset.index;\r\n      var ml=-window.innerWidth*0.22*i+window.innerWidth*0.39;\r\n      this.i=i;\r\n      this.marginLeft=ml;\r\n      var wiw=this.wiw;\r\n      //设置定时器，在i值改变时，50ms后准确的捕捉到元素   \r\n      setTimeout(()=>{     \r\n        var imgBlockNo=document.getElementsByClassName(\"noActive\");\r\n        // console.log(imgBlockNo)\r\n        for(var item of imgBlockNo){\r\n          item.style.width=17.6*wiw*0.01+'px';;\r\n          item.style.height=24.3*wiw*0.01+'px';;\r\n          item.style.left='10%';\r\n        }     \r\n        //使点击的图片居中\r\n        var imgBlock=e.target.parentNode;\r\n        // var imgBlock=document.getElementsByClassName(\"activeImg\")[0]\r\n        imgBlock.style.width=20.9*wiw*0.01+'px';\r\n        imgBlock.style.height=28.8*wiw*0.01+'px';\r\n        imgBlock.style.left=\"2.5%\";\r\n        //使其他图片归位\r\n      },50)\r\n    },\r\n    //鼠标松开时，使下标i的图片居中\r\n    ontouchend(){\r\n      var ml=-window.innerWidth*0.22*(this.i)+window.innerWidth*0.39;\r\n      this.marginLeft=ml; \r\n      var wiw=this.wiw;\r\n      var imgBlock=document.getElementsByClassName(\"activeImg\")[0]\r\n      imgBlock.style.width=20.9*wiw*0.01+'px';\r\n      imgBlock.style.height=28.8*wiw*0.01+'px';\r\n      imgBlock.style.left='2.5%';\r\n\r\n    },\r\n    //点击时保存鼠标初始位置，和ul的起始位置\r\n    ontouchstart(e){\r\n      var t1 = e.targetTouches[0];\r\n      this.xStart=t1.pageX;   \r\n      this.mlStart=this.marginLeft;  \r\n    },\r\n    //鼠标移动时，改变ul的margin-left;\r\n    ontouchmove(e){\r\n      var t2 = e.targetTouches[0];\r\n      var xMove=t2.pageX;                 //鼠标移动后的位置\r\n      var move=xMove-this.xStart;         //鼠标移动的距离=ul移动的距离        ;\r\n      var marginLeft=this.mlStart+move;\r\n      //1 防止到最右边和最左边\r\n      var widthMin=window.innerWidth*0.39;\r\n      if(marginLeft>=widthMin){\r\n        marginLeft=widthMin;\r\n      }\r\n      var widthMax=window.innerWidth*0.39-window.innerWidth*0.22*(this.movie.length-1)\r\n      if(marginLeft<=widthMax){\r\n        marginLeft=widthMax;\r\n      }\r\n      this.marginLeft=marginLeft;      \r\n    },\r\n    //ajax函数   参数cid\r\n    loadMore(){ \r\n      var url=\"cinema/v1/cinema_hasmovies\";\r\n      var obj={cid:this.cid};\r\n      this.axios.get(url,{params:obj}).then(res=>{\r\n        if(res.data.code==1){\r\n          console.log(res.data.data)\r\n          this.movie=res.data.data.infors;\r\n          this.time=res.data.data.times;\r\n          //后台传回mid\r\n          // var mid=this.$store.getMid();\r\n          // console.log(this.mname);\r\n\r\n          this.ulWidth=this.movie.length*window.innerWidth*0.22+'px'\r\n          // console.log(\"axios查询成功\")\r\n        }else{\r\n          console.log(\"axios查询失败1\")\r\n        }\r\n      })\r\n    },\r\n    loadCinema(){ \r\n      var url=\"cinema/v1/cinema_detail\";\r\n      var obj={cid:this.cid};\r\n      this.axios.get(url,{params:obj}).then(res=>{\r\n        if(res.data.code==1){\r\n          console.log(res.data.data[0])\r\n          this.cinema=res.data.data[0];\r\n          this.tag=this.strSplit(this.cinema.tag);\r\n          // console.log(\"axios查询成功\")\r\n        }else{\r\n          console.log(\"axios查询失败2\")\r\n        }\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n    @import url('../../assets/css/findCinemaItem.css');\r\n    @import url('../../assets/css/cinema.css')\r\n</style>\r\n"]}]}