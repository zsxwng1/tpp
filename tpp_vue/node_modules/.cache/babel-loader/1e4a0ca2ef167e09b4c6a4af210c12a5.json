{"remainingRequest":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\babel-loader\\lib\\index.js!c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\views\\cinema\\Cinema.vue?vue&type=script&lang=js","dependencies":[{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\views\\cinema\\Cinema.vue","mtime":1566635931569},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      active: 2,\n      i: 0,\n      //那张图片变大\n      marginLeft: window.innerWidth * 0.39,\n      // 22vw一个位移 ,保存了ul的margin-left值\n      xStart: \"\",\n      //保存了初始手指位置\n      mlStart: \"\",\n      //保存ul初始位置\n      movie: [],\n      time: [],\n      ulWidth: '400vw',\n      wiw: window.innerWidth,\n      cinema: [],\n      tag: []\n    };\n  },\n  watch: {\n    marginLeft: function marginLeft() {\n      //2 对marginLeft进行控制\n      var mlEnd = this.marginLeft; //3 获取移动结束的margin-left值\n      //4 下面动态改变i的值      \n\n      var ml = this.marginLeft; //\n\n      ml = window.innerWidth * 0.50 - ml; //用来计算向左移动多少margin-left\n\n      var i = parseInt(ml / (window.innerWidth * 0.22)); // console.log(ml);\n\n      if (i > this.movie.length - 1) {\n        i = this.movie.length - 1;\n      }\n\n      if (i < 0) {\n        i = 0;\n      }\n\n      this.i = i; // console.log(i);\n      //5 ml当前的margin-left;中心的margin-left;\n\n      var mlCenter = -window.innerWidth * 0.22 * this.i + window.innerWidth * 0.39; //i图片中心的margin-left;\n      // 6 获取最大的abs差值\n\n      var wiw = this.wiw;\n      var absMax = wiw * 0.11;\n      var absWid = Math.abs(mlEnd - mlCenter); //7 比例\n\n      var scale = 1 - absWid / absMax; // console.log(scale);\n\n      var imgBlock = document.getElementsByClassName(\"activeImg\")[0];\n      var imgBlockNo = document.getElementsByClassName(\"noActive\"); //使其他归位\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = imgBlockNo[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          item.style.width = '';\n          item.style.height = '';\n          item.style.left = '10%';\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      imgBlock.style.width = (17.6 + 3.3 * scale) * wiw * 0.01 + 'px';\n      imgBlock.style.height = (24.3 + 4.5 * scale) * wiw * 0.01 + 'px';\n      imgBlock.style.left = 2.5 + 7.5 * (1 - scale) + '%';\n    }\n  },\n  computed: {\n    //使用计算属性，动态返回图片的路径\n    imgUrls: function imgUrls() {\n      if (this.movie.length == 0) {\n        return null; //页面刷新时返回null\n      } else {\n        return \"http://127.0.0.1:5050/\".concat(this.movie[this.i].pic);\n      }\n    },\n    //ul的宽度\n    cid: function cid() {\n      return this.$store.state.cid;\n    },\n    //获取cid\n    mid: function mid() {\n      return this.$store.state.mid;\n    }\n  },\n  created: function created() {\n    //调用axios函数\n    this.loadCinema();\n    this.loadMore();\n  },\n  mounted: function mounted() {\n    this.loadCinema();\n  },\n  methods: {\n    strSplit: function strSplit(str) {\n      var arr = str.split(\"，\"); // console.log(arr)\n\n      return arr;\n    },\n    //点击图片时移动,改变i值和margin-left值\n    changeI: function changeI(e) {\n      var i = e.target.dataset.index;\n      var ml = -window.innerWidth * 0.22 * i + window.innerWidth * 0.39;\n      this.i = i;\n      this.marginLeft = ml;\n      var wiw = this.wiw; //设置定时器，在i值改变时，50ms后准确的捕捉到元素   \n\n      setTimeout(function () {\n        var imgBlockNo = document.getElementsByClassName(\"noActive\"); // console.log(imgBlockNo)\n\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = imgBlockNo[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var item = _step2.value;\n            item.style.width = 17.6 * wiw * 0.01 + 'px';\n            ;\n            item.style.height = 24.3 * wiw * 0.01 + 'px';\n            ;\n            item.style.left = '10%';\n          } //使点击的图片居中\n\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        var imgBlock = e.target.parentNode; // var imgBlock=document.getElementsByClassName(\"activeImg\")[0]\n\n        imgBlock.style.width = 20.9 * wiw * 0.01 + 'px';\n        imgBlock.style.height = 28.8 * wiw * 0.01 + 'px';\n        imgBlock.style.left = \"2.5%\"; //使其他图片归位\n      }, 50);\n    },\n    //鼠标松开时，使下标i的图片居中\n    ontouchend: function ontouchend() {\n      var ml = -window.innerWidth * 0.22 * this.i + window.innerWidth * 0.39;\n      this.marginLeft = ml;\n      var wiw = this.wiw;\n      var imgBlock = document.getElementsByClassName(\"activeImg\")[0];\n      imgBlock.style.width = 20.9 * wiw * 0.01 + 'px';\n      imgBlock.style.height = 28.8 * wiw * 0.01 + 'px';\n      imgBlock.style.left = '2.5%';\n    },\n    //点击时保存鼠标初始位置，和ul的起始位置\n    ontouchstart: function ontouchstart(e) {\n      var t1 = e.targetTouches[0];\n      this.xStart = t1.pageX;\n      this.mlStart = this.marginLeft;\n    },\n    //鼠标移动时，改变ul的margin-left;\n    ontouchmove: function ontouchmove(e) {\n      var t2 = e.targetTouches[0];\n      var xMove = t2.pageX; //鼠标移动后的位置\n\n      var move = xMove - this.xStart; //鼠标移动的距离=ul移动的距离        ;\n\n      var marginLeft = this.mlStart + move; //1 防止到最右边和最左边\n\n      var widthMin = window.innerWidth * 0.39;\n\n      if (marginLeft >= widthMin) {\n        marginLeft = widthMin;\n      }\n\n      var widthMax = window.innerWidth * 0.39 - window.innerWidth * 0.22 * (this.movie.length - 1);\n\n      if (marginLeft <= widthMax) {\n        marginLeft = widthMax;\n      }\n\n      this.marginLeft = marginLeft;\n    },\n    //ajax函数   参数cid\n    loadMore: function loadMore() {\n      var _this = this;\n\n      var url = \"cinema/v1/cinema_hasmovies\";\n      var obj = {\n        cid: this.cid\n      };\n      this.axios.get(url, {\n        params: obj\n      }).then(function (res) {\n        if (res.data.code == 1) {\n          console.log(res.data.data);\n          _this.movie = res.data.data.infors;\n          _this.time = res.data.data.times; //后台传回mid\n          // var mid=this.$store.getMid();\n          // console.log(this.mname);\n\n          _this.ulWidth = _this.movie.length * window.innerWidth * 0.22 + 'px'; // console.log(\"axios查询成功\")\n        } else {\n          console.log(\"axios查询失败1\");\n        }\n      });\n    },\n    loadCinema: function loadCinema() {\n      var _this2 = this;\n\n      var url = \"cinema/v1/cinema_detail\";\n      var obj = {\n        cid: this.cid\n      };\n      this.axios.get(url, {\n        params: obj\n      }).then(function (res) {\n        if (res.data.code == 1) {\n          console.log(res.data.data[0]);\n          _this2.cinema = res.data.data[0];\n          _this2.tag = _this2.strSplit(_this2.cinema.tag); // console.log(\"axios查询成功\")\n        } else {\n          console.log(\"axios查询失败2\");\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Cinema.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"cinema_show\">\r\n    <!--1 头部 ： 影院详情 -->\r\n    <div class=\"cinema_top\">\r\n      <div class=\"title\">{{cinema.cname}}</div>\r\n      <div class=\"address\">{{cinema.caddress}}}</div>\r\n      <div class=\"icons cf\">\r\n        <div class=\"icon\" v-for=\"(elem,i) of tag\" :key=\"i\">{{elem}}</div>\r\n        <!-- <div class=\"icon\">观影小食</div>\r\n        <div class=\"icon\">可停车</div> -->\r\n      </div>\r\n      <div class=\"prefe\">\r\n        <span>联合优惠专区</span> <br>\r\n        <span>银行、运营商特惠</span>\r\n      </div>\r\n      <div class=\"icon_abs\">\r\n        <img class=\"map\" src=\"http://127.0.0.1:5050/icon/dingwei.svg\" alt=\"\">\r\n        <img class=\"collect\" src=\"http://127.0.0.1:5050/icon/collect.svg\" alt=\"\">\r\n      </div>\r\n\r\n    </div>\r\n    <!--2 头部 ： 电影图片 -->\r\n    <div class=\"cinema_middle_img\" @touchstart=\"ontouchstart\" @touchmove=\"ontouchmove\" @touchend=\"ontouchend\">\r\n      <div class=\"img_blur\">\r\n        <img :src=\"imgUrls\" alt=\"\">\r\n      </div>\r\n      <div class=\"ul_cover\"></div>\r\n      <ul class=\"img_ul cf\" :style=\"{marginLeft:marginLeft+'px',width:ulWidth}\">\r\n        <li class=\"img_li\" v-for=\"(item,index) of movie\" :key=\"index\"> \r\n          <div class=\"img_block\" :class=\"{activeImg:index==i,noActive:index!=i}\">\r\n            <img   :src=\"`http://127.0.0.1:5050/${item.pic}`\" alt=\"\">\r\n            <div class=\"cover\" :data-index=\"index\" :class=\"{active:index==i}\" @click=\"changeI\" ></div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!--  -->\r\n    <div class=\"cinema_middle_title\" v-for=\"(item,index) of movie\" :key=\"index\" :class=\"{'d-none':index!=i}\">\r\n      <span class=\"title\">{{item.mname}}</span>\r\n      <span class=\"show\" :class=\"{'d-none':item.is_show==0}\">\r\n        <span class=\"ping\">淘票票评分</span>\r\n        <span class=\"score\">{{item.score}}</span>\r\n      </span>\r\n      <span class=\"show\"  :class=\"{'d-none':item.is_show==1}\">\r\n        <span class=\"people\">{{item.wish}}</span>\r\n        <span class=\"want\">人想看</span>\r\n      </span>\r\n      <br>\r\n      <span class=\"infor\">{{item.infor}}</span>\r\n    </div>\r\n    <!--3 头部 ： 电影播放时间 -->\r\n    <div class=\"cinema_bottom\" >\r\n      <van-tabs v-model=\"active\" line-width='5.3vw' color=\"#ff2e62\" line-height=\"2px\">\r\n        <van-tab title=\"今天08-24\">\r\n          内容 1\r\n        </van-tab>\r\n        <van-tab title=\"明天08-25\">\r\n          内容 2       \r\n        </van-tab>\r\n      </van-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      active: 2,\r\n      i:0,        //那张图片变大\r\n      marginLeft:window.innerWidth*0.39,  // 22vw一个位移 ,保存了ul的margin-left值\r\n      xStart:\"\",  //保存了初始手指位置\r\n      mlStart:\"\", //保存ul初始位置\r\n      movie:[],\r\n      time:[],\r\n      ulWidth:'400vw',\r\n      wiw:window.innerWidth,\r\n      cinema:[],\r\n      tag:[],\r\n    }\r\n  },\r\n  watch:{\r\n    marginLeft(){\r\n            //2 对marginLeft进行控制\r\n      var mlEnd=this.marginLeft;    //3 获取移动结束的margin-left值\r\n      //4 下面动态改变i的值      \r\n      var ml=this.marginLeft;\r\n      //\r\n      ml=window.innerWidth*0.50-ml; //用来计算向左移动多少margin-left\r\n      var i=parseInt(ml/(window.innerWidth*0.22)) ;\r\n      // console.log(ml);\r\n      if(i>this.movie.length-1){\r\n        i=this.movie.length-1\r\n      }\r\n      if(i<0){ i=0; }\r\n      this.i=i;\r\n      // console.log(i);\r\n      //5 ml当前的margin-left;中心的margin-left;\r\n      var mlCenter=-window.innerWidth*0.22*(this.i)+window.innerWidth*0.39;  //i图片中心的margin-left;\r\n      // 6 获取最大的abs差值\r\n      var wiw=this.wiw;\r\n      var absMax=wiw*0.11;\r\n      var absWid=Math.abs(mlEnd-mlCenter)\r\n      //7 比例\r\n      var scale=1-absWid/absMax;\r\n      // console.log(scale);\r\n      var imgBlock=document.getElementsByClassName(\"activeImg\")[0]\r\n      var imgBlockNo=document.getElementsByClassName(\"noActive\");\r\n      //使其他归位\r\n      for(var item of imgBlockNo){\r\n        item.style.width='';\r\n        item.style.height='';\r\n        item.style.left='10%';\r\n      }\r\n      imgBlock.style.width=(17.6+3.3*scale)*wiw*0.01+'px';\r\n      imgBlock.style.height=(24.3+4.5*scale)*wiw*0.01+'px';\r\n      imgBlock.style.left=(2.5+7.5*(1-scale))+'%';\r\n    }\r\n  },\r\n  computed:{\r\n    //使用计算属性，动态返回图片的路径\r\n    imgUrls(){\r\n      if(this.movie.length==0){ \r\n        return null;   //页面刷新时返回null\r\n      }else{\r\n        return  `http://127.0.0.1:5050/${this.movie[this.i].pic}`\r\n      }\r\n    },\r\n    //ul的宽度\r\n    cid(){ return this.$store.state.cid;  },  //获取cid\r\n    mid(){ return this.$store.state.mid;  }  , //获取mid\r\n    // mname(){ return this.$store.state.mname; }   //获取mid\r\n  },\r\n  created(){\r\n    //调用axios函数\r\n    this.loadCinema();\r\n    this.loadMore();\r\n  },\r\n  mounted(){\r\n    this.loadCinema();\r\n  },\r\n  methods:{ \r\n    strSplit(str){\r\n      var arr=str.split(\"，\");\r\n      // console.log(arr)\r\n      return arr;\r\n    },\r\n    //点击图片时移动,改变i值和margin-left值\r\n    changeI(e){\r\n      var i=e.target.dataset.index;\r\n      var ml=-window.innerWidth*0.22*i+window.innerWidth*0.39;\r\n      this.i=i;\r\n      this.marginLeft=ml;\r\n      var wiw=this.wiw;\r\n      //设置定时器，在i值改变时，50ms后准确的捕捉到元素   \r\n      setTimeout(()=>{     \r\n        var imgBlockNo=document.getElementsByClassName(\"noActive\");\r\n        // console.log(imgBlockNo)\r\n        for(var item of imgBlockNo){\r\n          item.style.width=17.6*wiw*0.01+'px';;\r\n          item.style.height=24.3*wiw*0.01+'px';;\r\n          item.style.left='10%';\r\n        }     \r\n        //使点击的图片居中\r\n        var imgBlock=e.target.parentNode;\r\n        // var imgBlock=document.getElementsByClassName(\"activeImg\")[0]\r\n        imgBlock.style.width=20.9*wiw*0.01+'px';\r\n        imgBlock.style.height=28.8*wiw*0.01+'px';\r\n        imgBlock.style.left=\"2.5%\";\r\n        //使其他图片归位\r\n      },50)\r\n    },\r\n    //鼠标松开时，使下标i的图片居中\r\n    ontouchend(){\r\n      var ml=-window.innerWidth*0.22*(this.i)+window.innerWidth*0.39;\r\n      this.marginLeft=ml; \r\n      var wiw=this.wiw;\r\n      var imgBlock=document.getElementsByClassName(\"activeImg\")[0]\r\n      imgBlock.style.width=20.9*wiw*0.01+'px';\r\n      imgBlock.style.height=28.8*wiw*0.01+'px';\r\n      imgBlock.style.left='2.5%';\r\n\r\n    },\r\n    //点击时保存鼠标初始位置，和ul的起始位置\r\n    ontouchstart(e){\r\n      var t1 = e.targetTouches[0];\r\n      this.xStart=t1.pageX;   \r\n      this.mlStart=this.marginLeft;  \r\n    },\r\n    //鼠标移动时，改变ul的margin-left;\r\n    ontouchmove(e){\r\n      var t2 = e.targetTouches[0];\r\n      var xMove=t2.pageX;                 //鼠标移动后的位置\r\n      var move=xMove-this.xStart;         //鼠标移动的距离=ul移动的距离        ;\r\n      var marginLeft=this.mlStart+move;\r\n      //1 防止到最右边和最左边\r\n      var widthMin=window.innerWidth*0.39;\r\n      if(marginLeft>=widthMin){\r\n        marginLeft=widthMin;\r\n      }\r\n      var widthMax=window.innerWidth*0.39-window.innerWidth*0.22*(this.movie.length-1)\r\n      if(marginLeft<=widthMax){\r\n        marginLeft=widthMax;\r\n      }\r\n      this.marginLeft=marginLeft;      \r\n    },\r\n    //ajax函数   参数cid\r\n    loadMore(){ \r\n      var url=\"cinema/v1/cinema_hasmovies\";\r\n      var obj={cid:this.cid};\r\n      this.axios.get(url,{params:obj}).then(res=>{\r\n        if(res.data.code==1){\r\n          console.log(res.data.data)\r\n          this.movie=res.data.data.infors;\r\n          this.time=res.data.data.times;\r\n          //后台传回mid\r\n          // var mid=this.$store.getMid();\r\n          // console.log(this.mname);\r\n\r\n          this.ulWidth=this.movie.length*window.innerWidth*0.22+'px'\r\n          // console.log(\"axios查询成功\")\r\n        }else{\r\n          console.log(\"axios查询失败1\")\r\n        }\r\n      })\r\n    },\r\n    loadCinema(){ \r\n      var url=\"cinema/v1/cinema_detail\";\r\n      var obj={cid:this.cid};\r\n      this.axios.get(url,{params:obj}).then(res=>{\r\n        if(res.data.code==1){\r\n          console.log(res.data.data[0])\r\n          this.cinema=res.data.data[0];\r\n          this.tag=this.strSplit(this.cinema.tag);\r\n          // console.log(\"axios查询成功\")\r\n        }else{\r\n          console.log(\"axios查询失败2\")\r\n        }\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n    @import url('../../assets/css/findCinemaItem.css');\r\n    @import url('../../assets/css/cinema.css')\r\n</style>\r\n"],"sourceRoot":"src\\views\\cinema"}]}