{"remainingRequest":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\babel-loader\\lib\\index.js!c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\components\\HeaderSearch.vue?vue&type=script&lang=js","dependencies":[{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\components\\HeaderSearch.vue","mtime":1566633872020},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"c:\\Users\\Administrator\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      isActive: true,\n      inputValue: '',\n      searchList: []\n    };\n  },\n  watch: {\n    //监听input框的输入内容\n    inputValue: function inputValue() {\n      // console.log(this.inputValue);\n      this.cinemaSearch();\n    }\n  },\n  methods: {\n    //---------跳转到影院界面,同时把cid,cname,保存到vuex---------\n    goCinema: function goCinema(e) {\n      var cid = e.target.dataset.cid; // var cid=e.target.dataset.cid;\n      // var cname=e.target.dataset.cname;\n\n      console.log(cid); // console.log(cname);\n      //--vuex--\n      // this.$store.commit(\"changeMname\",this.elem.mname)\n\n      this.$store.commit(\"changeCid\", cid); // this.$store.commit(\"changeCname\",cname)\n\n      this.$router.push(\"/cinema\");\n    },\n    //split函数，用于切割字符串形成数组\n    strSplit: function strSplit(str) {\n      var arr = str.split(\"，\"); // console.log(arr)\n\n      return arr;\n    },\n    //搜索功能\n    cinemaSearch: function cinemaSearch() {\n      var _this = this;\n\n      // http://127.0.0.1:5050/cinema/v1/search_cinema?sel=0\n      var url = \"cinema/v1/search_cinema\";\n      var obj = {\n        sel: this.inputValue\n      };\n      this.axios.get(url, {\n        params: obj\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          console.log(\"没有查询到数据\");\n          _this.searchList = [];\n        } else {\n          var list = res.data.data; //下面到底部是，搜索框对应文字变色功能\n\n          var str = _this.inputValue; //不等于0 才切割\n\n          if (str !== \"\") {\n            //1对名字的验证\n            for (var i = 0; i < list.length; i++) {\n              //拼接数据\n              if (list[i].cname.indexOf(str) >= 0) {\n                // console.log(str);\n                var arr = list[i].cname.split(str);\n                arr.splice(1, 0, str);\n                list[i].cname = arr;\n              } else {\n                list[i].cname = [list[i].cname];\n              }\n            } //2 对地址的验证\n\n\n            for (var i = 0; i < list.length; i++) {\n              //拼接数据\n              if (list[i].caddress.indexOf(str) >= 0) {\n                var arr = list[i].caddress.split(str);\n                arr.splice(1, 0, str);\n                list[i].caddress = arr;\n              } else {\n                list[i].caddress = [list[i].caddress];\n              }\n            }\n          } else {\n            for (var i = 0; i < list.length; i++) {\n              list[i].cname = [list[i].cname];\n              list[i].caddress = [list[i].caddress];\n            }\n          } // console.log(list);\n\n\n          _this.searchList = list;\n          console.log(_this.searchList);\n        }\n      });\n    },\n    // 用户点击时触发\n    onSearch: function onSearch() {\n      console.log(1);\n    },\n    //切换input页面的显示隐藏\n    changeActive: function changeActive() {\n      this.isActive = !this.isActive;\n    }\n  }\n};",{"version":3,"sources":["HeaderSearch.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div id=\"header_search\">\r\n      <!--1 放大镜 -->\r\n      <div class=\"magnifier\" @click=\"changeActive\">\r\n        <img src=\"../../public/img/header_search.svg\" alt=\"\">\r\n      </div>\r\n      <!--2 弹出的搜索页面 -->\r\n      <div class=\"search_input\" :class=\"{'d-none':isActive}\">\r\n        <!-- 搜索头部 -->\r\n        <div class=\"input_top\">\r\n          <form action=\"/\">\r\n            <van-search\r\n              v-model=\"inputValue\"\r\n              placeholder=\"影院名称或地址\"\r\n              show-action\r\n              @search=\"onSearch\" \r\n              @cancel=\"changeActive\"\r\n            />\r\n          </form>\r\n        </div>\r\n        <!-- 功能分析，要保存好电影的mid,和影院的cid -->\r\n        <!-- 3 搜索到的东西的内容展示 -->\r\n        <!-- 给这个元素设置高度，使其产生scroll效果 -->\r\n        <div class=\"input_content\">\r\n          <!-- <div class=\"input_main\"> -->\r\n            <div v-for=\"(item,i) of searchList\" :key=\"i\" class=\"input_block\" >\r\n              <div class=\"cover\"  :data-cid=\"item.cid\" @click=\"goCinema\"></div>\r\n              <div class=\"cname\"  >\r\n                <!-- {{item.cid}} -->\r\n                <span v-for=\"(elem,i) of item.cname\" :key=\"i\" :class=\"{red:elem==inputValue}\">{{elem}}</span>\r\n              </div>\r\n              <div class=\"caddress\">\r\n                <span v-for=\"(elem,i) of item.caddress\"  :key=\"i\" :class=\"{red:elem==inputValue}\">{{elem}}</span>              \r\n              </div>\r\n              <div class=\"tag\">\r\n                <div class=\"tag_icon\" v-for=\"(elem,i) of strSplit(item.tag)\" :key=\"i\">{{elem}}</div>\r\n              </div>\r\n              <div class=\"lowest\">{{item.lowest}}元起</div>\r\n            </div>            \r\n          <!-- </div> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {  \r\n      isActive:true,\r\n      inputValue:'',\r\n      searchList:[]\r\n    }\r\n  },\r\n  watch:{\r\n    //监听input框的输入内容\r\n    inputValue(){\r\n      // console.log(this.inputValue);\r\n      this.cinemaSearch();\r\n    }\r\n  },\r\n  methods:{\r\n    //---------跳转到影院界面,同时把cid,cname,保存到vuex---------\r\n    goCinema(e){\r\n      var cid=e.target.dataset.cid;\r\n      // var cid=e.target.dataset.cid;\r\n      // var cname=e.target.dataset.cname;\r\n      console.log(cid);\r\n      // console.log(cname);\r\n      //--vuex--\r\n      // this.$store.commit(\"changeMname\",this.elem.mname)\r\n      this.$store.commit(\"changeCid\",cid)\r\n      // this.$store.commit(\"changeCname\",cname)\r\n      this.$router.push(\"/cinema\");\r\n    },  \r\n    //split函数，用于切割字符串形成数组\r\n    strSplit(str){\r\n      var arr=str.split(\"，\");\r\n      // console.log(arr)\r\n      return arr;\r\n    },\r\n    //搜索功能\r\n    cinemaSearch(){\r\n      // http://127.0.0.1:5050/cinema/v1/search_cinema?sel=0\r\n      var url=\"cinema/v1/search_cinema\"\r\n      var obj={sel:this.inputValue};\r\n      this.axios.get(url,{params:obj}).then(res=>{\r\n        if(res.data.code==0){\r\n          console.log(\"没有查询到数据\");\r\n          this.searchList=[];\r\n        }else{\r\n          var list=res.data.data;\r\n          \r\n          //下面到底部是，搜索框对应文字变色功能\r\n          var str=this.inputValue;\r\n          //不等于0 才切割\r\n          if(str!==\"\"){\r\n            //1对名字的验证\r\n            for(var i=0;i<list.length;i++){\r\n              //拼接数据\r\n              if(list[i].cname.indexOf(str)>=0){\r\n                // console.log(str);\r\n                var arr=list[i].cname.split(str);\r\n                arr.splice(1,0,str);\r\n                list[i].cname=arr;\r\n              }else{\r\n              list[i].cname=[list[i].cname];\r\n              }\r\n            }\r\n            //2 对地址的验证\r\n            for(var i=0;i<list.length;i++){\r\n              //拼接数据\r\n              if(list[i].caddress.indexOf(str)>=0){\r\n                var arr=list[i].caddress.split(str);\r\n                arr.splice(1,0,str);\r\n                list[i].caddress=arr;\r\n              }else{\r\n                list[i].caddress=[list[i].caddress];\r\n              }\r\n            }            \r\n          }else{\r\n            for(var i=0;i<list.length;i++){\r\n              list[i].cname=[list[i].cname];\r\n              list[i].caddress=[list[i].caddress];\r\n            }\r\n          }\r\n          // console.log(list);\r\n          this.searchList=list;\r\n          console.log(this.searchList)\r\n        }\r\n      })        \r\n    },\r\n    // 用户点击时触发\r\n    onSearch(){\r\n      console.log(1);\r\n    },\r\n    //切换input页面的显示隐藏\r\n    changeActive(){\r\n      this.isActive=!this.isActive;\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  #header_search .input_block{\r\n    position: relative;;\r\n  }\r\n  #header_search .input_block .cover{\r\n    width:100%;height:100%;\r\n    position:absolute;\r\n    top:0;left:0;\r\n  }\r\n  @import url('../assets/css/headerSearch.css');\r\n</style>"],"sourceRoot":"src\\components"}]}