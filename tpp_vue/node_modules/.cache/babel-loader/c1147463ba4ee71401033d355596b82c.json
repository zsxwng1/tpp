{"remainingRequest":"C:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\views\\payment\\Payment.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\src\\views\\payment\\Payment.vue","mtime":1567063150776},{"path":"C:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\web\\Desktop\\tpp\\taopiaopiao\\tpp_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      show: false,\n      //弹出层\n      time: \"\",\n      cname: \"\",\n      buyList: [],\n      detail: {}\n    };\n  },\n  computed: {\n    url: function url() {\n      return this.$store.state.url;\n    }\n  },\n  created: function created() {\n    this.getData();\n    this.getTime();\n  },\n  methods: {\n    //向后台发请请求，把电影票的信息，添加到数据表中\n    paymoney: function paymoney() {\n      var _this = this;\n\n      var mname = this.detail.cname;\n      var tdate = \"\".concat(this.time, \" \").concat(this.detail.time_start, \"~\").concat(this.detail.time_end);\n      var d23 = this.detail.d23;\n      var cname = this.cname;\n      var seat = []; //遍历产生数组\n\n      for (var i = 0; i < this.buyList.length; i++) {\n        seat.push(\"\".concat(this.buyList[i].j + 1, \"\\u6392\").concat(this.buyList[i].i + 1, \"\\u5EA7\"));\n      }\n\n      console.log(seat);\n      var obj = {\n        mname: mname,\n        tdate: tdate,\n        d23: d23,\n        cname: cname,\n        seat: seat\n      }; // return ;\n\n      this.axios({\n        method: \"post\",\n        url: \"user/v1/ticket\",\n        data: obj\n      }).then(function (res) {\n        if (res.data.code == 1) {\n          console.log(\"购买电影票成功\"); //购买成功，跳转到ticket页面\n\n          _this.$router.push(\"/myticket\");\n        } else {\n          console.log(\"购买电影票失败\");\n        }\n      });\n    },\n    showPopup: function showPopup() {\n      //弹出层显示\n      this.show = true;\n    },\n    //获取上个页面的数据\n    getData: function getData() {\n      // var detail=this.$route.query;\n      var obj = this.$store.getters.getSeatObj; // console.log(detail)\n\n      this.cname = obj.cname.cname;\n      this.buyList = obj.buyList;\n      this.detail = obj.detail;\n      console.log(this.buyList);\n    },\n    //计算今天的时间\n    getTime: function getTime() {\n      var d = new Date();\n      var month = d.getMonth();\n\n      if (month + 1 < 10) {\n        month++;\n        month = \"0\" + month;\n      }\n\n      var date = d.getDate();\n\n      if (date < 10) {\n        date = \"0\" + date;\n      }\n\n      this.time = \"\".concat(month, \"-\").concat(date);\n    }\n  }\n};",{"version":3,"sources":["Payment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,YAAA,KADA;AACA;AACA,YAAA,EAFA;AAGA,aAAA,EAHA;AAIA,eAAA,EAJA;AAKA,cAAA;AALA,KAAA;AAOA,GATA;AAUA,YAAA;AACA,OADA,iBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA;AAHA,GAVA;AAeA,SAfA,qBAeA;AACA,SAAA,OAAA;AACA,SAAA,OAAA;AACA,GAlBA;AAmBA,WAAA;AACA;AACA,YAFA,sBAEA;AAAA;;AACA,UAAA,QAAA,KAAA,MAAA,CAAA,KAAA;AACA,UAAA,kBAAA,KAAA,IAAA,cAAA,KAAA,MAAA,CAAA,UAAA,cAAA,KAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,MAAA,KAAA,MAAA,CAAA,GAAA;AACA,UAAA,QAAA,KAAA,KAAA;AACA,UAAA,OAAA,EAAA,CALA,CAMA;;AACA,WAAA,IAAA,IAAA,CAAA,EAAA,IAAA,KAAA,OAAA,CAAA,MAAA,EAAA,GAAA,EAAA;AACA,aAAA,IAAA,WAAA,KAAA,OAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,mBAAA,KAAA,OAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AACA;;AACA,cAAA,GAAA,CAAA,IAAA;AACA,UAAA,MAAA;AAAA,oBAAA;AAAA,oBAAA;AAAA,gBAAA;AAAA,oBAAA;AAAA;AAAA,OAAA,CAXA,CAYA;;AACA,WAAA,KAAA,CAAA;AACA,gBAAA,MADA;AAEA,aAAA,gBAFA;AAGA,cAAA;AAHA,OAAA,EAIA,IAJA,CAIA,eAAA;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,kBAAA,GAAA,CAAA,SAAA,EADA,CAEA;;AACA,gBAAA,OAAA,CAAA,IAAA,CAAA,WAAA;AACA,SAJA,MAIA;AACA,kBAAA,GAAA,CAAA,SAAA;AACA;AACA,OAZA;AAaA,KA5BA;AA6BA,aA7BA,uBA6BA;AAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,KA/BA;AAgCA;AACA,WAjCA,qBAiCA;AACA;AACA,UAAA,MAAA,KAAA,MAAA,CAAA,OAAA,CAAA,UAAA,CAFA,CAGA;;AACA,WAAA,KAAA,GAAA,IAAA,KAAA,CAAA,KAAA;AACA,WAAA,OAAA,GAAA,IAAA,OAAA;AACA,WAAA,MAAA,GAAA,IAAA,MAAA;AACA,cAAA,GAAA,CAAA,KAAA,OAAA;AACA,KAzCA;AA0CA;AACA,WA3CA,qBA2CA;AACA,UAAA,IAAA,IAAA,IAAA,EAAA;AACA,UAAA,QAAA,EAAA,QAAA,EAAA;;AACA,UAAA,QAAA,CAAA,GAAA,EAAA,EAAA;AACA;AACA,gBAAA,MAAA,KAAA;AACA;;AACA,UAAA,OAAA,EAAA,OAAA,EAAA;;AACA,UAAA,OAAA,EAAA,EAAA;AACA,eAAA,MAAA,IAAA;AACA;;AACA,WAAA,IAAA,aAAA,KAAA,cAAA,IAAA;AACA;AAvDA;AAnBA,CAAA","sourcesContent":["<template>\r\n    <div class=\"d1\" id=\"payment\">\r\n        <div class=\"d2\">\r\n            <div class=\"i-title\">\r\n                <span class=\"f-name\">{{detail.cname}}</span>\r\n                <span class=\"count\">{{buyList.length}}张</span>\r\n            </div>\r\n            <div class=\"brief\">今天 {{time}} {{detail.time_start}}~{{detail.time_end}} ({{detail.d23}})</div>\r\n            <div class=\"brief\">{{cname}}</div>\r\n            <div class=\"brief\">\r\n                {{detail.room}} \r\n                <span style=\"padding:0px 2px\" v-for=\"(item,i) of buyList\" :key=\"i\">{{item.j+1}}排{{item.i+1}}座</span> \r\n            </div>\r\n        </div>\r\n        <div class=\"tpp-remark\"></div>\r\n        <div class=\"d3\">\r\n            <div class=\"dy-list-item\">\r\n                <div class=\"dy-list-label\">兑换券</div>\r\n                <div class=\"dy-list-extra\">无兑换券</div>\r\n            </div>\r\n            <div class=\"dy-list-item\">\r\n                    <div class=\"dy-list-label\">电影优惠券</div>\r\n                    <div class=\"dy-list-extra\" style=\"font-size: 13px;\">无优惠券</div>\r\n            </div>\r\n            <div class=\"dy-list-item\" style=\"border-top:1px solid rgba(0,0,0,.1)\">\r\n                    <div class=\"dy-list-label\">票价总计</div>\r\n                    <div class=\"dy-list-extra\">\r\n                        <span style=\"color: #ff2e62;\">{{(detail.price_e*buyList.length).toFixed(1)}}元</span>\r\n                    </div>\r\n            </div>\r\n            <div class=\"dy-whitespace\"></div>\r\n        </div>\r\n        <div class=\"d4\">\r\n                <div class=\"dy-list-item\">\r\n                    <div class=\"dy-list-label\">选购小食</div>\r\n                    <div class=\"dy-list-extra\" style=\"font-size:13px; right: 68px;\">边吃边看更爽哦</div>\r\n                    <div class=\"dy-list-thumbs\">\r\n                            <img :src=\"url+'payment/xiaoshi1.png'\" alt=\"\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"dy-list-items\">\r\n                    <div class=\"dy-list-thumb\">\r\n                        <div class=\"div-list-poster\">\r\n                            <img style=\"width:100%;height:100%\" :src=\"url+'payment/shuangren.jpg'\" alt=\"\">\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"dy-list-content\">\r\n                        <div class=\"dy-list-content-line\">\r\n                            <div class=\"dy-list-tag\">多人</div>\r\n                            <div class=\"dy-list-brief sales-desc\">爆米花大桶×1桶、大杯汽水（可乐/雪碧/芬达）×3杯</div>\r\n                        </div>\r\n                        <div class=\"dy-list-content-lines\">\r\n                            <div class=\"sales-price\">\r\n                                <span class=\"price red\">49.5元</span>\r\n                                <span class=\"stdPrice\">54元</span>\r\n                            </div>\r\n                            <div class=\"dy-list-value\">\r\n                                <div class=\"number-spinner-action\">\r\n                                    <a class=\"number-decrease\">\r\n                                        <img :src=\"url+'payment/jian.svg'\" alt=\"\">    \r\n                                    </a> \r\n                                </div>\r\n                                <div class=\"number-picker-wrapper\">0</div>\r\n                                <div class=\"number-spinner-action\">\r\n                                    <a class=\"number-increase\">\r\n                                        <img :src=\"url+'payment/increa.svg'\" alt=\"\">\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"dy-list-items\">\r\n                        <div class=\"dy-list-thumb\">\r\n                            <div class=\"div-list-posters\">\r\n                                <img style=\"width:100%;height:100%\" :src=\"url+'payment/danren.jpg'\" alt=\"\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"dy-list-content\">\r\n                            <div class=\"dy-list-content-line\">\r\n                                <div class=\"dy-list-tag\">单人</div>\r\n                                <div class=\"dy-list-brief sales-desc\">爆米花小桶×1桶、大杯汽水（可乐/雪碧/芬达）×1杯</div>\r\n                            </div>\r\n                            <div class=\"dy-list-content-lines\">\r\n                                <div class=\"sales-price\">\r\n                                    <span class=\"price red\">23.1元</span>\r\n                                    <span class=\"stdPrice\">25.2元</span>\r\n                                </div>\r\n                                <div class=\"dy-list-value\">\r\n                                    <div class=\"number-spinner-action\">\r\n                                        <a class=\"number-decrease\">\r\n                                            <img :src=\"url+'payment/jian.svg'\" alt=\"\">\r\n                                        </a>\r\n                                    </div>\r\n                                    <div class=\"number-picker-wrapper\">0</div>\r\n                                    <div class=\"number-spinner-action\">\r\n                                        <a class=\"number-increase\">\r\n                                            <img :src=\"url+'payment/increa.svg'\" alt=\"\">\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                <div class=\"dy-list-item\" style=\"border-top:1px solid rgba(0,0,0,.1)\">\r\n                        <div class=\"dy-list-label\">小食总计</div>\r\n                        <div class=\"dy-list-extra\">\r\n                            <span style=\"color: #ff2e62;\">0元</span>\r\n                        </div>\r\n                </div>\r\n                <div class=\"dy-whitespace\"></div>\r\n            </div>\r\n            <div>\r\n                <div class=\"dy-list-item\">\r\n                    <div >购票须知</div>\r\n                </div>\r\n                <div>\r\n                    <div class=\"d6\"><div class=\"dy-list-brief\">1.请确认场次和时间无误，购买成功后将不予退换\r\n2.由于设备故障等不可抗力因素，存在少量场次取消的情况，会进行退票退款\r\n3.由于影院系统不稳定等因素，存在出票失败的情况，会进行退款\r\n4.取票码不再通过短信发送，可在“支付宝-卡券”或“淘票票-我的-电影票”中查看\r\n5.下单即代表你同意《淘票票用户服务协议》\r\n                    </div></div>\r\n                    \r\n                </div>\r\n            </div>\r\n            <div class=\"pay-bar\">\r\n                <div class=\"pay-tip\">\r\n                    <div class=\"lefts\">不支持退票、改签</div>\r\n                    <div class=\"rights\">\r\n                        <span class=\"action\">应付</span>\r\n                        <span class=\"amount\">{{(detail.price_e*buyList.length).toFixed(1)}}</span>\r\n                        <span class=\"yuan\">元</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"pay-btn\">\r\n                    <span style=\"color: #fff; font-size: 18px;\" @click=\"showPopup\">立即付款</span>\r\n                </div>\r\n                <van-popup v-model=\"show\">\r\n                    <div class=\"pay_cover\" @click=\"paymoney\">\r\n                       <img :src=\"url+'weixin.jpg'\" alt=\"\">   \r\n                       <h3>请扫码付款</h3>                  \r\n                    </div>\r\n                </van-popup>\r\n            </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            show:false, //弹出层\r\n            time:\"\",\r\n            cname:\"\",\r\n            buyList:[],\r\n            detail:{},\r\n        }\r\n    },\r\n    computed:{\r\n        url(){\r\n            return this.$store.state.url\r\n        },    \r\n    },\r\n    created(){\r\n        this.getData();\r\n        this.getTime();\r\n    },\r\n    methods:{\r\n        //向后台发请请求，把电影票的信息，添加到数据表中\r\n        paymoney(){\r\n            var mname=this.detail.cname;\r\n            var tdate=`${this.time} ${this.detail.time_start}~${this.detail.time_end}`\r\n            var d23=this.detail.d23;\r\n            var cname=this.cname;\r\n            var seat=[];\r\n            //遍历产生数组\r\n            for (var i=0;i<this.buyList.length;i++){  \r\n                seat.push(`${this.buyList[i].j+1}排${this.buyList[i].i+1}座`)\r\n            }\r\n            console.log(seat);\r\n            var obj={ mname,tdate,d23,cname,seat };\r\n            // return ;\r\n            this.axios({\r\n                method:\"post\",\r\n                 url:\"user/v1/ticket\",\r\n                 data:obj\r\n            }).then(res=>{\r\n                if(res.data.code==1){\r\n                    console.log(\"购买电影票成功\")\r\n                    //购买成功，跳转到ticket页面\r\n                    this.$router.push(\"/myticket\")\r\n                }else{\r\n                    console.log(\"购买电影票失败\")\r\n                }\r\n            })\r\n        },\r\n        showPopup(){    //弹出层显示\r\n            this.show=true;\r\n        },\r\n        //获取上个页面的数据\r\n        getData(){\r\n            // var detail=this.$route.query;\r\n            var obj=this.$store.getters.getSeatObj;\r\n            // console.log(detail)\r\n            this.cname=obj.cname.cname;\r\n            this.buyList=obj.buyList;\r\n            this.detail=obj.detail;  \r\n            console.log(this.buyList)                      \r\n        },\r\n        //计算今天的时间\r\n        getTime(){\r\n            var d=new Date();\r\n            var month=d.getMonth();\r\n            if(month+1<10){\r\n                month++;\r\n                month=\"0\"+month\r\n            }\r\n            var date=d.getDate();\r\n            if(date<10){\r\n                date=\"0\"+date;\r\n            }\r\n            this.time= `${month}-${date}`\r\n        }\r\n    }\r\n    \r\n\r\n\r\n}\r\n</script>\r\n<style>\r\n     @import url('../../assets/css/payment.css');\r\n</style>"],"sourceRoot":"src\\views\\payment"}]}