{"remainingRequest":"C:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\src\\components\\NavLogin.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\src\\components\\NavLogin.vue","mtime":1564747439619},{"path":"C:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\web\\Desktop\\bosideng\\bosideng_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      isOn: false,\n      //双向绑定，获取input框里的uname,upwd\n      uname: \"\",\n      upwd: \"\",\n      unameholder: \"输入用户名\",\n      upwdholder: \"输入密码\",\n      //占位nav_left_login;\n      nav_left_login: \"欢迎\",\n      isLogin: false\n    };\n  },\n  created: function created() {\n    //创建成功时向服务器发起请求，查看是否存在req.session,返回uname的值\n    this.loadIsLogin();\n  },\n  methods: {\n    //点击购物车时对isLogin进行判断，为false，则提示登录，true的话进入购物车\n    go_cart: function go_cart() {\n      if (this.isLogin == false) {\n        this.$toast({\n          message: \"请先登录\",\n          duration: 1000\n        }); //弹出登录框\n\n        this.isOn = true;\n      } else {\n        //isLogin为true，直接跳到/shoppinCar\n        this.$router.push(\"/shoppingCar\");\n      }\n    },\n    login: function login() {\n      this.isOn = true;\n    },\n    close: function close() {\n      this.isOn = false;\n    },\n    //跳转到lady商城\n    go_lady: function go_lady() {\n      this.$router.push(\"/lady\");\n    },\n    go_index: function go_index() {\n      this.$router.push(\"/\");\n    },\n    check: function check() {\n      var _this = this;\n\n      var unameReg = /^[a-z0-9]{2,12}$/i;\n\n      if (!this.reg(unameReg, this.uname, \"用户名错误\")) {\n        return;\n      }\n\n      ;\n      var upwdReg = /^[a-z0-9]{2,12}$/i;\n\n      if (!this.reg(unameReg, this.upwd, \"密码错误\")) {\n        return;\n      }\n\n      ;\n      var uname = this.uname;\n      var upwd = this.upwd; //正确时发起ajax请求\n\n      var url = \"user/v1/login\";\n      var obj = {\n        uname: uname,\n        upwd: upwd\n      };\n      this.axios.get(url, {\n        params: obj\n      }).then(function (res) {\n        // console.log(res);\n        //传过来的东西在res.data里\n        if (res.data.code == 1) {\n          _this.$toast(\"\\u767B\\u5F55\\u6210\\u529F,\\u6B22\\u8FCE\\u56DE\\u6765,\".concat(uname));\n\n          _this.isOn = false;\n          _this.isLogin = true;\n          _this.nav_left_login = uname;\n        } else {\n          _this.$toast(\"用户名或密码错误\");\n        }\n\n        console.log(res.data.code);\n      });\n    },\n    reg: function reg(_reg, elem, msg) {\n      var j = _reg.test(elem);\n\n      if (j) {\n        return true;\n      } else {\n        this.$toast({\n          message: msg,\n          duration: 1000\n        });\n        return false;\n      }\n    },\n    loadIsLogin: function loadIsLogin() {\n      var _this2 = this;\n\n      var url = \"user/v1/isLogin\";\n      this.axios.get(url).then(function (res) {\n        // console.log(res.data);\n        if (res.data.code == 1) {\n          _this2.isLogin = true;\n          _this2.nav_left_login = res.data.data[0].uname; // console.log(res.data.data[0].uname);\n          // this.nav_left_login=res.data.data.\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["NavLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAsBA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,YAAA,KADA;AAEA;AACA,aAAA,EAHA;AAIA,YAAA,EAJA;AAKA,mBAAA,OALA;AAMA,kBAAA,MANA;AAOA;AACA,sBAAA,IARA;AASA,eAAA;AATA,KAAA;AAWA,GAbA;AAcA,SAdA,qBAcA;AACA;AACA,SAAA,WAAA;AACA,GAjBA;AAkBA,WAAA;AACA;AACA,WAFA,qBAEA;AACA,UAAA,KAAA,OAAA,IAAA,KAAA,EAAA;AACA,aAAA,MAAA,CAAA;AACA,mBAAA,MADA;AAEA,oBAAA;AAFA,SAAA,EADA,CAKA;;AACA,aAAA,IAAA,GAAA,IAAA;AACA,OAPA,MAOA;AACA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,cAAA;AACA;AACA,KAdA;AAeA,SAfA,mBAeA;AAAA,WAAA,IAAA,GAAA,IAAA;AAAA,KAfA;AAgBA,SAhBA,mBAgBA;AAAA,WAAA,IAAA,GAAA,KAAA;AAAA,KAhBA;AAiBA;AACA,WAlBA,qBAkBA;AAAA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AAAA,KAlBA;AAmBA,YAnBA,sBAmBA;AAAA,WAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AAAA,KAnBA;AAoBA,SApBA,mBAoBA;AAAA;;AACA,UAAA,WAAA,mBAAA;;AACA,UAAA,CAAA,KAAA,GAAA,CAAA,QAAA,EAAA,KAAA,KAAA,EAAA,OAAA,CAAA,EAAA;AACA;AACA;;AAAA;AACA,UAAA,UAAA,mBAAA;;AACA,UAAA,CAAA,KAAA,GAAA,CAAA,QAAA,EAAA,KAAA,IAAA,EAAA,MAAA,CAAA,EAAA;AACA;AACA;;AAAA;AACA,UAAA,QAAA,KAAA,KAAA;AACA,UAAA,OAAA,KAAA,IAAA,CAVA,CAWA;;AACA,UAAA,MAAA,eAAA;AACA,UAAA,MAAA;AAAA,eAAA,KAAA;AAAA,cAAA;AAAA,OAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AAAA,gBAAA;AAAA,OAAA,EAAA,IAAA,CACA,eAAA;AACA;AACA;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA,6DAAA,KAAA;;AACA,gBAAA,IAAA,GAAA,KAAA;AACA,gBAAA,OAAA,GAAA,IAAA;AACA,gBAAA,cAAA,GAAA,KAAA;AACA,SALA,MAKA;AACA,gBAAA,MAAA,CAAA,UAAA;AACA;;AACA,gBAAA,GAAA,CAAA,IAAA,IAAA,CAAA,IAAA;AACA,OAbA;AAeA,KAjDA;AAkDA,OAlDA,eAkDA,IAlDA,EAkDA,IAlDA,EAkDA,GAlDA,EAkDA;AACA,UAAA,IAAA,KAAA,IAAA,CAAA,IAAA,CAAA;;AACA,UAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,MAAA,CAAA;AACA,mBAAA,GADA;AAEA,oBAAA;AAFA,SAAA;AAIA,eAAA,KAAA;AACA;AACA,KA7DA;AA8DA,eA9DA,yBA8DA;AAAA;;AACA,UAAA,MAAA,iBAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CACA,eAAA;AACA;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,iBAAA,OAAA,GAAA,IAAA;AACA,iBAAA,cAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,CAAA,EAAA,KAAA,CAFA,CAGA;AACA;AACA;AACA,OATA;AAWA;AA3EA;AAlBA,CAAA","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"nav_left\">\r\n            <div @click=\"login\" :class=\"{'d-none':isLogin}\">点击登录</div>\r\n            <div  :class=\"{'d-none':!isLogin}\">{{nav_left_login}}</div>\r\n            <div>退出登录</div>\r\n            <div @click=\"go_cart\">购物车</div> \r\n            <div @click=\"go_lady\">lady商城</div> \r\n            <div @click=\"go_index\">首页</div> \r\n        </div>\r\n        <div class=\"login\" :class=\"{on:isOn}\">\r\n            <mt-field label=\"用户名\" v-model=\"uname\" :attr=\"{maxlength:10}\" :placeholder=\"unameholder\">\r\n            </mt-field>\r\n            <mt-field label=\"密码\" v-model=\"upwd\" :attr=\"{maxlength:10}\" type=\"password\" :placeholder=\"upwdholder\">\r\n            </mt-field>\r\n            <mt-button type=\"primary\" size=\"large\" @click=\"check\">登录</mt-button>\r\n            <mt-button type=\"primary\" size=\"large\" class=\"btn_reg\" >注册</mt-button>\r\n            <mt-button  size=\"large\" class=\"btn_close\" @click=\"close\">退出</mt-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return {\r\n            isOn:false,\r\n            //双向绑定，获取input框里的uname,upwd\r\n            uname:\"\",\r\n            upwd:\"\",\r\n            unameholder:\"输入用户名\",\r\n            upwdholder:\"输入密码\",\r\n            //占位nav_left_login;\r\n            nav_left_login:\"欢迎\",\r\n            isLogin:false,\r\n        }\r\n    },\r\n    created(){\r\n        //创建成功时向服务器发起请求，查看是否存在req.session,返回uname的值\r\n        this.loadIsLogin();\r\n    },\r\n    methods:{\r\n        //点击购物车时对isLogin进行判断，为false，则提示登录，true的话进入购物车\r\n        go_cart(){\r\n            if(this.isLogin==false){\r\n                this.$toast({\r\n                    message:\"请先登录\",\r\n                    duration:1000\r\n                });\r\n                //弹出登录框\r\n                this.isOn=true;\r\n            }else{\r\n                //isLogin为true，直接跳到/shoppinCar\r\n                 this.$router.push(\"/shoppingCar\")\r\n            }\r\n        },\r\n        login(){this.isOn=true;},\r\n        close(){this.isOn=false;},\r\n        //跳转到lady商城\r\n        go_lady(){ this.$router.push(\"/lady\");},\r\n        go_index(){ this.$router.push(\"/\");},\r\n        check(){\r\n           var unameReg=/^[a-z0-9]{2,12}$/i;\r\n           if(!this.reg(unameReg,this.uname,\"用户名错误\")){\r\n               return;\r\n           };\r\n           var upwdReg=/^[a-z0-9]{2,12}$/i;\r\n           if(!this.reg(unameReg,this.upwd,\"密码错误\")){\r\n               return;\r\n           };\r\n           var uname=this.uname;\r\n           var upwd=this.upwd;\r\n            //正确时发起ajax请求\r\n            var url=\"user/v1/login\";\r\n            var obj={uname:uname,upwd:upwd};\r\n            this.axios.get(url,{params:obj}).then(\r\n                res=>{\r\n                    // console.log(res);\r\n                    //传过来的东西在res.data里\r\n                    if(res.data.code==1){\r\n                        this.$toast(`登录成功,欢迎回来,${uname}`);\r\n                        this.isOn=false;\r\n                        this.isLogin=true;\r\n                        this.nav_left_login=uname;\r\n                    }else{\r\n                        this.$toast(\"用户名或密码错误\")\r\n                    }\r\n                    console.log(res.data.code)\r\n                }\r\n            )\r\n        },\r\n        reg(reg,elem,msg){\r\n            var j=reg.test(elem);\r\n            if(j){\r\n                return true;\r\n            }else{\r\n                this.$toast({\r\n                    message:msg,\r\n                    duration:1000\r\n                })\r\n                return false;\r\n            }\r\n        },\r\n        loadIsLogin(){\r\n            var url=\"user/v1/isLogin\";\r\n            this.axios.get(url).then(\r\n                res=>{\r\n                    // console.log(res.data);\r\n                    if(res.data.code==1){\r\n                        this.isLogin=true;\r\n                        this.nav_left_login=res.data.data[0].uname;\r\n                        // console.log(res.data.data[0].uname);\r\n                        // this.nav_left_login=res.data.data.\r\n                    }\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.nav_left{\r\n  position:fixed;z-index: 99;\r\n  top:50%;right:5%;margin-top:-140px;\r\n  font-size:24px;\r\n  text-align: center;\r\n  width:60px;\r\n  border-radius:5px;\r\n  background-color:aliceblue;\r\n}\r\n\r\n.btn_reg{background-color:aquamarine;margin-top:10px;}\r\n\r\n.nav_left div{\r\n    padding: 5px ;\r\n    cursor:pointer;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n.nav_left div:hover{\r\n    background-color: #fff;\r\n}\r\n\r\n.login{\r\n display:none;\r\n  width:375px;\r\n  background-color:#fff;\r\n  border:2px solid #eee;\r\n  z-index: 60;\r\n  padding:20px;\r\n  border-radius:3px;\r\n  position:fixed; \r\n  top:50%;left:50%;margin-left:-187.5px;margin-top:-140px;\r\n}\r\n.login.on{\r\n    display:block !important;\r\n}\r\n.btn_close{\r\n    margin-top:10px;\r\n}\r\n.d-none{\r\n    display:none;\r\n}\r\n</style>"],"sourceRoot":"src\\components"}]}